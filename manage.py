#!/usr/bin/env python
# السطر أعلاه يخبر نظام التشغيل (لينكس/ماك) أن هذا الملف يجب تشغيله باستخدام مفسر بايثون.

"""أداة سطر الأوامر الخاصة بجانغو للمهام الإدارية."""

import os   # مكتبة للتعامل مع نظام التشغيل (مثل قراءة متغيرات البيئة)
import sys  # مكتبة للتعامل مع أوامر النظام والمدخلات (مثل ما تكتبه في التيرمينال)
from dotenv import load_dotenv # استيراد الدالة المسؤولة عن قراءة ملف .env

# ---------------------------------------------------------
# هذه الإضافة الخاصة بك:
# تقوم بالبحث عن ملف باسم .env وتحميل المتغيرات الموجودة فيه
# (مثل مفاتيح الأمان وكلمات سر قاعدة البيانات) لتصبح متاحة للمشروع
load_dotenv()
# ---------------------------------------------------------

def main():
    """الدالة الرئيسية التي تقوم بتشغيل المهام الإدارية."""
    
    # هنا نحدد لجانغو مكان ملف الإعدادات (settings.py)
    # كلمة 'sacm_project' هي اسم مجلد مشروعك، و 'settings' هو اسم الملف بداخله
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'sacm_project.settings')
    
    try:
        # محاولة استيراد دالة التنفيذ الأساسية من مكتبة جانغو
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        # هذا الجزء يعمل فقط إذا حدث خطأ ولم يجد بايثون مكتبة جانغو
        # عادة ما يحدث هذا إذا نسيت تفعيل البيئة الافتراضية (activat venv)
        raise ImportError(
            "لا يمكن استيراد Django. هل أنت متأكد من تثبيته "
            "وأنك قمت بتفعيل البيئة الافتراضية (virtual environment)؟"
        ) from exc
    
    # هذا السطر هو المحرك الفعلي
    # يأخذ الأمر الذي كتبته (مثل: runserver أو migrate)
    # الموجود في (sys.argv) وينفذه
    execute_from_command_line(sys.argv)


# هذا الشرط يعني: "نفذ الكود التالي فقط إذا تم تشغيل هذا الملف مباشرة"
# (أي عندما تكتب python manage.py ...)
if __name__ == '__main__':
    main()